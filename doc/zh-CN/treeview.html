<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>qcjs help</title>

    <script src="../link.js"></script>

    <style>

    </style>

</head>
<body>
<div class="left">
    <div class="menu"></div>
</div>
<div class="right">
    <p></p>
    <h2>treeview</h2>
    <p>
        树状视图。
    </p>

    <p></p>
    <h4>treeview 属性</h4>
    <dl>
        <dt>qc-get</dt>
        <dd>
            获取数据的链接或方法。<br>
            方法的参数:
            <div>
                <ul>
                    <li>re: 对象。</li>
                    <li>callee: 回调函数。</li>
                </ul>
            </div>
        </dd>

        <dt>qc-mode</dt>
        <dd>
            manual: 手动加载数据 <br>
            auto: 自动加载数据
        </dd>

        <dt>qc-content</dt>
        <dd>
            数据显示模板。
        </dd>

        <dt>qc-key</dt>
        <dd>
            唯一字段。
        </dd>

        <dt>qc-pKey</dt>
        <dd>
            获取数据关联关键字段。
        </dd>

        <dt>qc-value</dt>
        <dd>
            qc-pKey 值。
        </dd>

        <dt>qc-type</dt>
        <dd>
            在 qc-content 内。
            <div>
                <ul>
                    <li>collapse：折叠按钮</li>
                    <li>expand：展开按钮</li>
                    <li>addNew：新增按钮</li>
                </ul>
            </div>
        </dd>

        <dt>qc-levels</dt>
        <dd>
            最多下级层数。
        </dd>
    </dl>
    <p></p>

    <p></p>
    <h4 class="imp">例子</h4>
    <pre class="code">
        // html body
        没 addNew 按钮：
        &lt;div qc-control="treeview" class="qc-treeview" qc-mode="auto" qc-get="get1"&gt;

            &lt;div qc-content qc-pKey="pid" qc-value="1" qc-key="id"&gt;
                &lt;span class="button fa fa-angle-down" qc-type="collapse"&gt;&lt;/span&gt;
                &lt;span class="button fa fa-angle-right" qc-type="expand"&gt;&lt;/span&gt;
                &lt;span&gt;goods: &lt;/span&gt;
                &lt;span qc-field="name" class="black"&gt;&lt;/span&gt;
                &nbsp;&nbsp;
                &lt;span&gt;brand: &lt;/span&gt;
                &lt;span qc-field="brand" class="black"&gt;&lt;/span&gt;
            &lt;/div&gt;

        &lt;/div&gt;

        有 addNew 按钮：
        &lt;div qc-control="treeview" class="qc-treeview" qc-mode="auto" qc-get="get1"&gt;

            &lt;div qc-content qc-pKey="pid" qc-value="1" qc-key="id"&gt;
                &lt;span class="button fa fa-angle-down" qc-type="collapse"&gt;&lt;/span&gt;
                &lt;span class="button fa fa-angle-right" qc-type="expand"&gt;&lt;/span&gt;
                &lt;span qc-field="name" class="black"&gt;&lt;/span&gt;
                &lt;span class="button fa fa-plus-circle" qc-type="addNew"  qc-for="popfrm"&gt;
                    &lt;!-- add new event --&lt;
                &lt;/span&gt;
            &lt;/div&gt;

        &lt;/div&gt;

        // javascript
            var datas = [
                {"id": "2", "name": "mobile", "brand": "all", "pid": "1"},
                {"id": "21", "name": "Galaxy S21", "brand": "Samsung", "pid": "2"},
                {"id": "22", "name": "iPhone 13", "brand": "Apple", "pid": "2"},
                {"id": "3", "name": "pc", "brand": "all", "pid": "1"},
                {"id": "31", "name": "Surface Pro", "brand": "Microsoft", "pid": "3"},
                {"id": "32", "name": "MacBook", "brand": "Apple", "pid": "3"},
            ];

            function get1(re, callee) {
                var data = [],
                    contrl = re.contrl,
                    pKey = contrl[0].pKey,
                    pVal = re.args[pKey];console.log(re);

                for (var i = 0; i &lt; datas.length; i++) {
                    var b = datas[i];
                    if (b[pKey] == pVal) {
                        data.push(b);
                    }
                }
                var d = {rows: data.length, data: data};
                callee(d, re);
            }

    </pre>

    <p></p>
    <h4 class="imp">Result</h4>
    <div class="result">

        没 addNew 按钮：
        <div qc-control="treeview" class="qc-treeview" qc-mode="auto" qc-get="get1">

            <div qc-content qc-pKey="pid" qc-value="1" qc-key="id">
                <span class="button fa fa-angle-down" qc-type="collapse"></span>
                <span class="button fa fa-angle-right" qc-type="expand"></span>
                <span>goods: </span>
                <span qc-field="name" class="black"></span>
                &nbsp;&nbsp;
                <span>brand: </span>
                <span qc-field="brand" class="black"></span>
            </div>

        </div>

        有 addNew 按钮：
        <div qc-control="treeview" class="qc-treeview" qc-mode="auto" qc-get="get1">

            <div qc-content qc-pKey="pid" qc-value="1" qc-key="id">
                <span class="button fa fa-angle-down" qc-type="collapse"></span>
                <span class="button fa fa-angle-right" qc-type="expand"></span>
                <span qc-field="name" class="black"></span>
                <span class="button fa fa-plus-circle" qc-type="addNew" qc-for="popfrm">
                    <!-- add new event -->
                </span>
            </div>

        </div>

        <script>
            var datas = [
                {"id": "2", "name": "mobile", "brand": "all", "pid": "1"},
                {"id": "21", "name": "Galaxy S21", "brand": "Samsung", "pid": "2"},
                {"id": "22", "name": "iPhone 13", "brand": "Apple", "pid": "2"},
                {"id": "3", "name": "pc", "brand": "all", "pid": "1"},
                {"id": "31", "name": "Surface Pro", "brand": "Microsoft", "pid": "3"},
                {"id": "32", "name": "MacBook", "brand": "Apple", "pid": "3"},
            ];

            function get1(re, callee) {
                var data = [],
                    contrl = re.contrl,
                    pKey = contrl[0].pKey,
                    pVal = re.args[pKey];

                for (var i = 0; i < datas.length; i++) {
                    var b = datas[i];
                    if (b[pKey] == pVal) {
                        data.push(b);
                    }
                }
                var d = {rows: data.length, data: data};
                callee(d, re);
            }
        </script>

    </div>


</div>

</body>
</html>